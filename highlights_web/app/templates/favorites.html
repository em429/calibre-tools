{% extends "base.html" %}

{% block title %}Favorite Annotations{% endblock %}

{% block content %}
<div class="space-y-8">
    {% for book_id, book_data in favorited_annotations.items() %}
    <div class="book-section">
        <h2 class="text-2xl text-sky-600 dark:text-sky-300 font-semibold mb-4">
            <a href="/book/{{ book_id }}" class="hover:underline">{{ book_data.title }}</a>
        </h2>
        <div class="space-y-4">
            {% for annotation in book_data.annotations %}
            <div class="">
                <p class="text-slate-600 dark:text-slate-200">{{ annotation.text }}</p>

                <!-- timestamp -->
                <span class="mt-1 mr-2 float-left text-slate-400/50 font-thin">{{ annotation.timestamp | float | to_datetime() }}</span>

                <!-- favorite button-->
                <button class="text-xl focus:outline-none  {% if not annotation.is_favorite %}text-slate-300/50{% endif %} text-yellow-300/70"
                        onclick="toggleFavorite({{ annotation.id }}, this)">
                    &#9733;
                </button>

            </div>
            {% endfor %}
        </div>
    </div>
    {% else %}
    <p class="text-slate-600">No favorite annotations yet.</p>
    {% endfor %}
</div>
{% endblock %}
